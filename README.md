# nrf52840-mdk-radio-tx ‚Äî –ü—Ä–∏–º–µ—Ä –ø–µ—Ä–µ–¥–∞—Ç—á–∏–∫–∞ –Ω–∞ nRF52840

–ü—Ä–æ–µ–∫—Ç –¥–µ–º–æ–Ω—Å—Ç—Ä–∏—Ä—É–µ—Ç —Ä–∞–±–æ—Ç—É –≤—Å—Ç—Ä–æ–µ–Ω–Ω–æ–≥–æ —Ä–∞–¥–∏–æ-–º–æ–¥—É–ª—è nRF52840 –≤ —Ä–µ–∂–∏–º–µ –ø–µ—Ä–µ–¥–∞—á–∏ –ø–∞–∫–µ—Ç–æ–≤ (TX).  
–ö–æ–¥ —Ä–µ–∞–ª–∏–∑—É–µ—Ç –º–∏–Ω–∏–º–∞–ª—å–Ω—ã–π, register-level –ø–µ—Ä–µ–¥–∞—Ç—á–∏–∫ –±–µ–∑ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è SoftDevice / BLE, –ø—Ä–æ—Å—Ç–æ –Ω–∏–∑–∫–æ—É—Ä–æ–≤–Ω–µ–≤—É—é –Ω–∞—Å—Ç—Ä–æ–π–∫—É —Ä–∞–¥–∏–æ –∏ –æ—Ç–ø—Ä–∞–≤–∫—É –ø–∞–∫–µ—Ç–∞.

---

## üì° –ß—Ç–æ –¥–µ–ª–∞–µ—Ç –ø—Ä–æ–µ–∫—Ç

- –ö–æ–Ω—Ñ–∏–≥—É—Ä–∏—Ä—É–µ—Ç —Ä–∞–¥–∏–æ (–∫–∞–Ω–∞–ª, –º–æ—â–Ω–æ—Å—Ç—å, –∞–¥—Ä–µ—Å, —Ñ–æ—Ä–º–∞—Ç –ø–∞–∫–µ—Ç–∞) —á–µ—Ä–µ–∑ —Ä–µ–≥–∏—Å—Ç—Ä—ã `NRF_RADIO`  
- –ó–∞–ø—É—Å–∫–∞–µ—Ç –ø–µ—Ä–µ–¥–∞—á—É –æ–¥–Ω–æ–≥–æ 32-–±–∏—Ç–Ω–æ–≥–æ (‚Äúuint32_t‚Äù) –ø–∞–∫–µ—Ç–∞  
- –î–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏—è –±–∞–∑–æ–≤–æ–≥–æ —Ä–∞–¥–∏–æ-—Ç—Ä–∞–Ω—Å–º–∏—Ç–∞ ‚Äúas is‚Äù ‚Äî –ø–æ–ª–µ–∑–Ω–æ –¥–ª—è —Ç–µ—Å—Ç–∞ –∞–ø–ø–∞—Ä–∞—Ç–Ω–æ–π —á–∞—Å—Ç–∏ –∏ –ø—Ä–æ–≤–µ—Ä–∫–∏, —á—Ç–æ —Ä–∞–¥–∏–æ –º–æ–¥—É–ª—å –∏—Å–ø—Ä–∞–≤–µ–Ω  

---

## üîß –ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç (–ø—Ä–∏–º–µ—Ä–Ω–∞—è –ª–æ–≥–∏–∫–∞)

–ü—Ä–∏–º–µ—Ä —Ñ—É–Ω–∫—Ü–∏–∏ –æ—Ç–ø—Ä–∞–≤–∫–∏ (–Ω–∞ –æ—Å–Ω–æ–≤–µ —Ä–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω—ë–Ω–Ω–æ–≥–æ –ø–æ–¥—Ö–æ–¥–∞ –¥–ª—è nRF52 / nRF52840) –º–æ–∂–µ—Ç –≤—ã–≥–ª—è–¥–µ—Ç—å —Ç–∞–∫:

```c
static uint32_t packet = <your_data>;

void send_packet(void) {
    NRF_RADIO->EVENTS_READY = 0U;
    NRF_RADIO->TASKS_TXEN   = 1U;
    while (!NRF_RADIO->EVENTS_READY) { }
    NRF_RADIO->EVENTS_END   = 0U;
    NRF_RADIO->TASKS_START  = 1U;
    while (!NRF_RADIO->EVENTS_END) { }
    NRF_RADIO->EVENTS_DISABLED = 0U;
    // –î–∞–ª–µ–µ —Ä–∞–¥–∏–æ –ø–µ—Ä–µ–≤–µ–¥–µ–Ω–æ –≤ –≤—ã–∫–ª—é—á–µ–Ω–Ω–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ ‚Äî –º–æ–∂–Ω–æ –ø–æ–≤—Ç–æ—Ä–∏—Ç—å TX –∏–ª–∏ –ø–µ—Ä–µ–∫–ª—é—á–∏—Ç—å—Å—è –Ω–∞ RX
}
````

–≠—Ç–æ—Ç –∞–ª–≥–æ—Ä–∏—Ç–º –∞–Ω–∞–ª–æ–≥–∏—á–µ–Ω –æ–ø–∏—Å–∞–Ω–Ω–æ–º—É –≤ —Å—Ç–∞—Ç—å–µ –ø–æ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ TX –Ω–∞ nRF52. ([igotit.tistory.com][1])

---

## üß© –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ / —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è

–ü–µ—Ä–µ–¥ —Å–±–æ—Ä–∫–æ–π —É–∫–∞–∂–∏—Ç–µ –≤ `Makefile` –ø—É—Ç–∏:

```makefile
MDK_ROOT := /Users/nick/projects/iot/nrf52840-mdk/
SDK_ROOT := /Users/nick/projects/iot/nRF5_SDK_17.1.0_ddde560/
```

–¢—Ä–µ–±—É—é—Ç—Å—è:

* `arm-none-eabi-gcc`, `arm-none-eabi-binutils`
* `nrfutil` –∏–ª–∏ –¥—Ä—É–≥–æ–π –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –¥–ª—è –ø—Ä–æ—à–∏–≤–∫–∏
* –ü–ª–∞—Ç–∞ nRF52840 (–Ω–∞–ø—Ä–∏–º–µ—Ä MDK / DK / Dongle), –ø–æ–¥–∫–ª—é—á—ë–Ω–Ω–∞—è –ø–æ USB

---

## üõ† –°–±–æ—Ä–∫–∞ –∏ –ø—Ä–æ—à–∏–≤–∫–∞

```bash
make
make flash
```

–°–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ ‚Äî `make` –¥–ª—è —Å–±–æ—Ä–∫–∏, `make flash` –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏ –ø—Ä–æ—à–∏–≤–∫–∏ –Ω–∞ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ.

---

## üìÇ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

* `main.c` ‚Äî —Ç–æ—á–∫–∞ –≤—Ö–æ–¥–∞, –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è, –≤—ã–∑–æ–≤ –æ—Ç–ø—Ä–∞–≤–∫–∏ –ø–∞–∫–µ—Ç–∞
* `radio.c` / `radio.h` ‚Äî —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è –Ω–∏–∑–∫–æ—É—Ä–æ–≤–Ω–µ–≤–æ–π –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ —Ä–∞–¥–∏–æ –∏ —Ñ—É–Ω–∫—Ü–∏–∏ `send_packet()`
* `radio_config.h` ‚Äî –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ –∫–∞–Ω–∞–ª–∞, –∞–¥—Ä–µ—Å–æ–≤, —Ñ–æ—Ä–º–∞—Ç–∞ –ø–∞–∫–µ—Ç–∞ (BASE, PREFIX, BALEN, —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∞—è –¥–ª–∏–Ω–∞, –º–∞–∫—Å. –¥–ª–∏–Ω–∞, endianness, whitening/CRC –∏ –ø—Ä.)
* `Makefile` ‚Äî –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è —Å–±–æ—Ä–∫–∏, –ø—É—Ç–∏ –∫ SDK –∏ –ø–ª–∞—Ç–µ

---

## ‚úÖ –ü—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

–ù–∞–ø—Ä–∏–º–µ—Ä, –≤ `main.c`:

```c
int main(void) {
    // ... –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è —Ä–∞–¥–∏–æ ...
    uint32_t data = 0x12345678;
    packet = data;
    send_packet();
    // –ú–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –∑–∞–¥–µ—Ä–∂–∫—É, –ø–æ–≤—Ç–æ—Ä–Ω—É—é –æ—Ç–ø—Ä–∞–≤–∫—É –∏ —Ç.–ø.
    while (true) { /* spin or sleep */ }
}
```

–ü—Ä–∏—ë–º—É —Ç–∞–∫–æ–≥–æ –ø–∞–∫–µ—Ç–∞ –º–æ–∂–µ—Ç —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–æ–≤–∞—Ç—å –ø—Ä–æ–µ–∫—Ç-–ø—Ä–∏—ë–º–Ω–∏–∫ (RX), —á—Ç–æ–±—ã –ø—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ –¥–∞–Ω–Ω—ã–µ –ø–µ—Ä–µ–¥–∞—é—Ç—Å—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ.

---

## ‚ÑπÔ∏è –ù–∞ —á—Ç–æ –æ–±—Ä–∞—Ç–∏—Ç—å –≤–Ω–∏–º–∞–Ω–∏–µ

* –ü–∞—Ä–∞–º–µ—Ç—Ä—ã –ø–∞–∫–µ—Ç–∞ (–¥–ª–∏–Ω–∞, –∞–¥—Ä–µ—Å–∞, —Ñ–æ—Ä–º–∞—Ç) –¥–æ–ª–∂–Ω—ã —Ç–æ—á–Ω–æ —Å–æ–≤–ø–∞–¥–∞—Ç—å –Ω–∞ –ø–µ—Ä–µ–¥–∞—Ç—á–∏–∫–µ –∏ –ø—Ä–∏—ë–º–Ω–∏–∫–µ (RX), –∏–Ω–∞—á–µ –ø—Ä–∏—ë–º –Ω–µ —Å—Ä–∞–±–æ—Ç–∞–µ—Ç. –°–æ–≥–ª–∞—Å–Ω–æ —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏–∏ —Ä–∞–¥–∏–æ –±–ª–æ–∫–∞ –≤ nRF52840, –≤–∞–∂–Ω—ã –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ ‚Äúpacket configuration‚Äù, ‚Äúaddress configuration‚Äù, whitening / CRC, endianness. ([docs-be.nordicsemi.com][2])
* –ü–æ—Å–ª–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –ø–µ—Ä–µ–¥–∞—á–∏ –∂–µ–ª–∞—Ç–µ–ª—å–Ω–æ —è–≤–Ω–æ –≤—ã–∫–ª—é—á–∞—Ç—å —Ä–∞–¥–∏–æ (–∏–ª–∏ –ø–µ—Ä–µ–≤–æ–¥–∏—Ç—å –µ–≥–æ –≤ —Å–æ—Å—Ç–æ—è–Ω–∏–µ DISABLED), —á—Ç–æ–±—ã –∏–∑–±–µ–∂–∞—Ç—å –ª–∏—à–Ω–µ–≥–æ —Ä–∞—Å—Ö–æ–¥–∞ —ç–Ω–µ—Ä–≥–∏–∏.
* –°—Ç–æ–∏—Ç —É—á–∏—Ç—ã–≤–∞—Ç—å, —á—Ç–æ –ø–µ—Ä–µ–¥–∞—á–∞ - —ç—Ç–æ –æ–¥–Ω–æ—Ä–∞–∑–æ–≤—ã–π (–∏–ª–∏ –ø–æ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—é) –∞–∫—Ç; –µ—Å–ª–∏ –Ω—É–∂–µ–Ω –ø–æ—Ç–æ–∫ –ø–∞–∫–µ—Ç–æ–≤, –Ω—É–∂–Ω–∞ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è —Ü–∏–∫–ª–∞/—Ç–∞–π–º–µ—Ä–∞ + –≤–æ–∑–º–æ–∂–Ω–æ–π –æ–±—Ä–∞–±–æ—Ç–∫–∏ –æ—à–∏–±–æ–∫.

---
